(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(34)},26:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),l=n(17),o=n.n(l),a=(n(26),n(2)),s=n(3),c=n(5),u=n(4),v=n(6),f=n(7),d=(n(32),function(e){return{type:"RECEIVE_PROGRESS",progress:e}});var p=function(e){return{type:"NEW_GAME",text:e}},h=function(e){return{type:"VISIT_VERTEX",id:e}},g=function(e){return{type:"RESET_LEVEL",id:e}},m=n(8),b=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tile,n=e.tileState,r=e.tileSize,l=e.edgeSize,o=["tile",t.tileType,n.valid?" valid":" invalid"];return t.symbol&&(o.push("symbol"),o.push("symbol-"+t.symbol)),i.a.createElement("div",{className:o.join(" "),style:{width:r,height:r,left:t.x1*(r+l),top:t.y1*(r+l),color:t.color||"black"}})}}]),t}(r.Component),y=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.edge,n=e.edgeState,r=e.tileSize,l=e.edgeSize;return t.x1===t.x2?i.a.createElement("div",{className:"edge vertical"+(n.visited?" visited":"")+(t.broken?" broken":""),style:{width:l,height:r,left:t.x1*(r+l)-l,top:t.y1*(r+l)}}):i.a.createElement("div",{className:"edge horizontal"+(n.visited?" visited":"")+(t.broken?" broken":""),style:{width:r,height:l,left:t.x1*(r+l),top:t.y1*(r+l)-l}})}}]),t}(r.Component),O=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.vertex,n=e.vertexState,r=e.tileSize,l=e.edgeSize;return"entry"===t.vertexType?i.a.createElement("div",{className:"vertex "+(t.vertexType||"")+(n.visited?" visited":""),style:{width:3*l,height:3*l,left:t.x*(r+l)-l-l,top:t.y*(r+l)-l-l}}):"exit"===t.vertexType?i.a.createElement("div",{className:"vertex "+(t.vertexType||"")+(n.visited?" visited":""),style:{width:3*l,height:3*l,left:t.x*(r+l)-l-l,top:t.y*(r+l)-l-l}}):i.a.createElement("div",{className:"vertex "+(t.vertexType||"")+(n.visited?" visited":""),style:{width:l,height:l,left:t.x*(r+l)-l,top:t.y*(r+l)-l}})}}]),t}(r.Component),S=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).onMouseDown=e.onMouseDown.bind(Object(m.a)(Object(m.a)(e))),e.onMouseMove=e.onMouseMove.bind(Object(m.a)(Object(m.a)(e))),e.onMouseUp=e.onMouseUp.bind(Object(m.a)(Object(m.a)(e))),e.state={},e.dragging=!1,e}return Object(v.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.div.addEventListener("touchstart",this.onMouseDown),this.div.addEventListener("touchmove",this.onMouseMove,{passive:!1}),this.div.addEventListener("touchend",this.onMouseUp)}},{key:"onMouseDown",value:function(e){this.dragging=!0}},{key:"onMouseMove",value:function(e){if(this.dragging){var t,n,r=this.props,i=r.level,l=r.visitVertex,o=r.tileSize,a=r.edgeSize;if(e.targetTouches?(t=e.targetTouches[0],n=e.target,e.preventDefault()):(t=e.nativeEvent,n=e.nativeEvent.target),t&&n){var s=t.clientX-n.offsetLeft,c=t.clientY-n.offsetTop,u=Math.round(s/(o+a))-1,v=Math.round(c/(o+a))-1;if(console.log(s+", "+c+" => "+u+", "+v),u>=0&&v>=0&&v<=i.rows&&u<=i.cols)l(v*(i.cols+1)+u)}}}},{key:"onMouseUp",value:function(e){if(this.dragging){this.dragging=!1;var t,n,r=this.props,i=r.level,l=r.visitVertex,o=r.tileSize,a=r.edgeSize;if(e.targetTouches?(t=e.targetTouches[0],n=e.target):(t=e.nativeEvent,n=e.nativeEvent.target),t&&n){var s=t.clientX-n.offsetLeft,c=t.clientY-n.offsetTop,u=Math.round(s/(o+a))-1,v=Math.round(c/(o+a))-1;if(console.log(s+", "+c+" => "+u+", "+v),u>=0&&v>=0&&v<=i.rows&&u<=i.cols)l(v*(i.cols+1)+u)}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.level,r=t.tileSize,l=t.edgeSize,o=t.boardSize,a=t.vMargin,s=t.hMargin;if(n&&n.tiles&&n.tiles[0]){var c=null;return n.completed&&!n.won?c=i.a.createElement("div",{className:"boardOverlay"}):n.completed&&n.won&&(c=i.a.createElement("div",{className:"boardOverlay"})),i.a.createElement("div",{className:"board "+(n.completed?" completed":"")+(n.won?" won":""),ref:function(t){return e.div=t},onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,style:{marginTop:a,marginBottom:a,marginLeft:s,marginRight:s,width:o,height:o}},n.tiles.map(function(e,t){return i.a.createElement(b,{key:t,tile:e,tileState:n.tileState[t],tileSize:r,edgeSize:l})}),n.edges.map(function(e,t){return i.a.createElement(y,{key:t,edge:e,edgeId:t,edgeState:n.edgeState[t],tileSize:r,edgeSize:l})}),n.vertices.map(function(e,t){return i.a.createElement(O,{key:t,vertex:e,vertexId:t,vertexState:n.vertexState[t],tileSize:r,edgeSize:l})}),c)}return i.a.createElement("div",{className:"board"},"No game loaded;")}}]),t}(r.Component),E=Object(f.b)(function(e){return{}},function(e){return{resetLevel:function(t){return e(g(t))},newGame:function(t){return e(p(t))},visitVertex:function(t){return e(h(t))}}})(S),j=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={tileSize:50,edgeSize:10},e.updateSize=e.updateSize.bind(Object(m.a)(Object(m.a)(e))),e}return Object(v.a)(t,e),Object(s.a)(t,[{key:"updateSize",value:function(){if(this.div){var e=this.div.getBoundingClientRect();console.log(e);var t=Math.min(e.width,e.height)-20,n=t/60,r=t/(this.props.level.cols+2)-n;this.setState({boardSize:t,vMargin:(e.height-t)/2,hMargin:(e.width-t)/2,tileSize:r,edgeSize:n})}}},{key:"componentDidMount",value:function(){this.updateSize(),window.addEventListener("resize",this.updateSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateSize)}},{key:"render",value:function(){var e=this,t=this.state,n=t.level,r=t.prevLevel,l=t.nextLevel,o=t.tileSize,a=t.edgeSize,s=t.boardSize,c=t.vMargin,u=t.hMargin;return i.a.createElement("div",{className:"boardcontainer",ref:function(t){return e.div=t},onClick:this.onClick},r?i.a.createElement("div",{className:"prevLevel"},i.a.createElement(E,Object.assign({level:r},{tileSize:o,edgeSize:a,boardSize:s,vMargin:c,hMargin:u}))):null,n?i.a.createElement("div",{className:"currentLevel"},i.a.createElement(E,Object.assign({level:n},{tileSize:o,edgeSize:a,boardSize:s,vMargin:c,hMargin:u}))):null,l?i.a.createElement("div",{className:"nextLevel"},i.a.createElement(E,Object.assign({level:l},{tileSize:o,edgeSize:a,boardSize:s,vMargin:c,hMargin:u}))):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.level&&e.level?t.level&&e.level&&t.level.levelId!==e.level.levelId?(console.log("resetting"),{nextLevel:e.level,level:null,prevLevel:t.level}):(!t.level.completed&&e.level.completed&&(e.level.won?setTimeout(function(){return e.newGame()},500):setTimeout(function(){return e.resetLevel()},1e3)),{nextLevel:null,level:e.level,prevLevel:null}):{nextLevel:null,level:e.level,prevLevel:null}}}]),t}(r.Component),M=Object(f.b)(function(e){return{level:e.level}},function(e){return{resetLevel:function(t){return e(g(t))},newGame:function(t){return e(p(t))},visitVertex:function(t){return e(h(t))}}})(j),x=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.newGame,n=e.resetLevel,r=e.showLevelSelect,l=e.showRules,o=e.progress;return i.a.createElement("div",{className:"menu"},i.a.createElement("button",{onClick:function(){return t()}},"New Game"),i.a.createElement("button",{onClick:function(){return n()}},"Retry"),i.a.createElement("button",{onClick:function(){return r()}},"Level ",o.currentDifficulty),i.a.createElement("button",{onClick:function(){return l()}},"Rules"))}}]),t}(r.Component),T=Object(f.b)(function(e){return{progress:e.progress,level:e.level}},function(e){return{resetLevel:function(t){return e(g(t))},newGame:function(t){return e(p(t))},showLevelSelect:function(t){return e(function(e){return{type:"SHOW_LEVEL_SELECT",id:e}}(t))},showRules:function(t){return e(function(e){return{type:"SHOW_RULES",id:e}}(t))}}})(x),w=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tileSpec,n=e.updateTileDescription;return i.a.createElement("div",{className:"rulesrow"},i.a.createElement("div",{className:"tile symbol symbol-"+t.symbol}),i.a.createElement("textarea",{value:t.description,onChange:function(e){n(e.target.value)},placeholder:"Tap to edit when you know the rules"}))}}]),t}(r.Component),k=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hideRules,n=e.visible,r=e.progress,l=e.updateTileDescription;return i.a.createElement("div",{className:"modalpage "+(n?"visible":"hidden")},i.a.createElement("div",{className:"contentbox"},i.a.createElement("h1",null,"Rules"),i.a.createElement("p",{style:{maxWidth:550,margin:"auto",marginBottom:50}},"Draw a line from the start to the finish, separating the board into regions matching the tile rules below."),r.tileTypes.map(function(e,t){return i.a.createElement(w,{key:t,tileSpec:e,updateTileDescription:function(e){return l(t,e)}})}),i.a.createElement("button",{className:"donebutton",onClick:function(){return t()}},"Done")))}}]),t}(r.Component),L=Object(f.b)(function(e){return{progress:e.progress,visible:e.rulesShown}},function(e){return{hideRules:function(t){return e(function(e){return{type:"HIDE_RULES",id:e}}(t))},updateTileDescription:function(t,n){return e(function(e,t){return{type:"UPDATE_TILE_DESCRIPTION",id:e,description:t}}(t,n))}}})(k),z=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tileSpec,n=e.setCurrentDifficulty,r=e.difficulty,l=e.selected;return i.a.createElement("div",{className:"rulesrow"+(l?" selected":""),onClick:function(){return n(r)}},i.a.createElement("div",{className:"tile symbol symbol-"+t.symbol}),"Level ",r)}}]),t}(r.Component),C=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.progress;return e.winsToNextUnlock<=0?null:i.a.createElement("div",{className:"rulesrow"},i.a.createElement("div",{className:"tile symbol symbol-lock"}),"Win ",e.winsToNextUnlock," more games on level ",e.maxDifficulty," to unlock")}}]),t}(r.Component),N=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.hideLevelSelect,e.setCurrentDifficulty),n=e.visible,r=e.progress;return i.a.createElement("div",{className:"modalpage "+(n?"visible":"hidden")},i.a.createElement("div",{className:"contentbox"},i.a.createElement("h1",null,"Select a level"),r.tileTypes.map(function(e,n){return i.a.createElement(z,{key:n,selected:r.currentDifficulty===n+1,difficulty:n+1,tileSpec:e,setCurrentDifficulty:t})}),i.a.createElement(C,{progress:r})))}}]),t}(r.Component),D=Object(f.b)(function(e){return{progress:e.progress,visible:e.levelSelectShown}},function(e){return{setCurrentDifficulty:function(t){return e(function(e){return{type:"SET_CURRENT_DIFFICULTY",val:e}}(t))},hideLevelSelect:function(t){return e(function(e){return{type:"HIDE_LEVEL_SELECT",id:e}}(t))}}})(N),R=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.progress,n=e.loadProgress;t||n()}},{key:"render",value:function(){return this.props.progress?i.a.createElement("div",{className:"App",style:{}},i.a.createElement("h1",null,"Path Game"),i.a.createElement(M,null),i.a.createElement(T,null),i.a.createElement(L,null),i.a.createElement(D,null)):null}}]),t}(r.Component),I=Object(f.b)(function(e){return{progress:e.progress}},function(e){return{loadProgress:function(t){return e(function(e){var t=localStorage.getItem("progress"),n=t?JSON.parse(t):null;e(d(n))})}}})(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(11),U=n(10),V=n(1),G={blank:{validate:function(){return!0}},paired:{generateSubtype:function(e){return{tileType:"paired",groupSize:Math.floor(5*Math.random()+1),symbol:e}},place:function(e,t,n){console.log("placing paired tiles");for(var r=["black","white","orange","blue","green","purple","yellow"].map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]}),i=Math.min(r.length,Math.floor(Math.random()*(t.length-2)+2)),l=function(i){for(var l=r[i],o=Object(U.a)(t.keys()).filter(function(r){var i=t[r];return!i.some(function(e){return"paired"===n[e].tileType&&n[e].color===l})&&!(i.filter(function(e){return"blank"===n[e].tileType}).length<e.groupSize)}),a=Math.min(o.length,Math.floor(Math.random()*(t.length-2)+2)),s=0;s<a;s++)if(0!==o.length){var c=Math.floor(Math.random()*o.length),u=o[c];o.splice(c,1);for(var v=t[u],f=0;f<e.groupSize;f++){var d=v.filter(function(e){return"blank"===n[e].tileType}),p=n[d[Math.floor(Math.random()*d.length)]];p.tileType="paired",p.color=l,p.groupSize=e.groupSize,p.symbol=e.symbol}}},o=0;o<i;o++)l(o)},validate:function(e,t,n,r){var i=n[e];return t.filter(function(e){var t=n[e];return i.tileType===t.tileType&&i.color===t.color}).length===i.groupSize}},sameColor:{place:function(e,t,n){console.log("placing sameColor tiles");var r=["black","white","orange","blue","green","purple","yellow"].map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]}),i=Math.min(r.length,Math.floor(Math.random()*(t.length-2)+2));console.log("placing sameColor tiles - "+i);for(var l=Object(U.a)(t.keys()),o=0;o<i;o++){var a=Math.floor(Math.random()*l.length),s=l[a];l.splice(a,1);for(var c=t[s],u=Math.ceil(c.length/2),v=Math.floor(Math.random()*(u-1)+1),f=0;f<v;f++){var d=n[c[Math.floor(Math.random()*c.length)]];"blank"===d.tileType&&(d.tileType="sameColor",d.color=r[o],d.symbol=e.symbol)}}},validate:function(e,t,n,r){var i=n[e],l=t.filter(function(t){if(t===e)return!1;var r=n[t];return i.tileType===r.tileType&&i.color!==r.color});return l.length>0&&(console.log("failed on tile "+e),console.log(i),console.log(t),console.log(l),console.log(n[l[0]])),0===l.length}}},W=["tree","drop","square","circle","diamond","octagon","blob","sun","react"];function P(e,t){return t.filter(function(t,n){return!(t.vertices.length<2)&&(t.vertices[0]===e||t.vertices[1]===e)}).map(function(t,n){return t.vertices[0]===e?t.vertices[1]:t.vertices[0]})}function H(e,t){for(var n=[],r=0;r<t.length;r++){var i=e.indexOf(t[r].vertices[0]),l=e.indexOf(t[r].vertices[1]);i>=0&&l>=0&&1===Math.abs(l-i)&&n.push(r)}return n}function F(e,t,n,r,i,l){n.splice(n.indexOf(e),1),t.push(e);var o=i.filter(function(t,r){if(t.tiles.length<2)return!1;if(l.indexOf(r)>=0)return!1;var i;if(t.tiles[0]===e)i=t.tiles[1];else{if(t.tiles[1]!==e)return!1;i=t.tiles[0]}return!(n.indexOf(i)<0)}).map(function(t,n){return t.tiles[0]===e?t.tiles[1]:t.tiles[0]}),a=!0,s=!1,c=void 0;try{for(var u,v=o[Symbol.iterator]();!(a=(u=v.next()).done);a=!0){var f=u.value;n.indexOf(f)<0||F(f,t,n,r,i,l)}}catch(d){s=!0,c=d}finally{try{a||null==v.return||v.return()}finally{if(s)throw c}}}function A(e,t,n){for(var r=e.map(function(e,t){return t}),i=[];r.length>0;){var l=[];F(r[0],l,r,e,t,n),i.push(l)}return i}function B(e,t,n){console.log(n);for(var r={name:"Generated Level",levelId:Math.floor(1e7*Math.random()),difficulty:n.currentDifficulty,rows:e,cols:t,tiles:[],edges:[],vertices:[],path:[],completed:!1,won:!1},i=0;i<=e;i++)for(var l=0;l<=t;l++){var o={x:l+1,y:i+1,vertexType:"standard"};r.vertices.push(o)}for(var a=0;a<=e;a++){for(var s=0;s<t;s++){var c={x1:s+1,y1:a+1,x2:s+2,y2:a+1,broken:!1,tiles:[],vertices:[a*(t+1)+s,a*(t+1)+s+1]};a>0&&c.tiles.push((a-1)*t+s),a<e&&c.tiles.push(a*t+s),r.edges.push(c)}if(a<e)for(var u=0;u<=t;u++){var v={x1:u+1,y1:a+1,x2:u+1,y2:a+2,broken:!1,tiles:[],vertices:[a*(t+1)+u,(a+1)*(t+1)+u]};u>0&&v.tiles.push(a*t+u-1),u<t&&v.tiles.push(a*t+u),r.edges.push(v)}}for(var f=0;f<e;f++)for(var d=0;d<t;d++){var p={tileType:"blank",x1:d+1,y1:f+1,x2:d+2,y2:f+2};r.tiles.push(p)}for(var h=0;h<r.vertices.length;h++)r.vertices[h].neighbours=P(h,r.edges);for(var g=[Math.floor((e+1)*(t+1)-t/2-1)],m=0;m<g.length;m++)r.vertices[g[m]].vertexType="entry";for(var b=[Math.floor(t/2)],y=0;y<b.length;y++)r.vertices[b[y]].vertexType="exit";for(var O=function e(t,n,r,i){if("exit"===n[t[t.length-1]].vertexType){var l=H(t,r),o={path:t,length:t.length,regions:A(i,r,l),edges:l};return o.regions.length<4?null:o}var a=n[t[t.length-1]].neighbours.filter(function(e){return t.indexOf(e)<0});if(0===a.length)return null;for(var s,c=Math.random()>.5&&t.length>1;!c&&!s;){var u=a[Math.floor(Math.random()*a.length)];if(s=e(Object(U.a)(t).concat([u]),n,r,i))return s;c=Math.random()>.5&&t.length>1}return null}([g[0]],r.vertices,r.edges,r.tiles),S=0;S<O.regions.length;S++)for(var E=0;E<O.regions[S].length;E++)r.tiles[O.regions[S][E]].solutionRegion=S;for(var j=Math.floor(15*Math.random()+5),M=0;M<j;M++){var x=Math.floor(Math.random()*r.edges.length);O.edges.indexOf(x)>=0||(console.log("breaking edge "+x),r.edges[x].broken=!0)}for(var T=0;T<n.tileTypes.length&&T<r.difficulty;T++){var w=n.tileTypes[T];G[w.tileType].place(w,O.regions,r.tiles,w)}return r.edgeState=r.edges.map(function(e){return{visited:!1}}),r.vertexState=r.vertices.map(function(e){return{visited:!1}}),r.tileState=r.tiles.map(function(e){return{valid:!0}}),r.regions=[r.tiles.map(function(e,t){return t})],r.vertexState[g[0]].visited=!0,r.path=[g[0]],r.solution=O,r.entries=g,r.exits=b,r}var J={tileTypes:[{tileType:"paired",groupSize:2,symbol:"diamond",description:"Must be matched with one other of the same color"},{tileType:"sameColor",symbol:"drop",description:"Must not share a region with one of a different color"}],currentDifficulty:2,maxDifficulty:2,winsToNextUnlock:1},X={level:Object(V.a)({},B(6,6,J)),levelSelectShown:!1,rulesShown:!1};function Y(e){localStorage.setItem("progress",JSON.stringify(e))}var q=n(20),$=Object(_.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"RECEIVE_PROGRESS":var n=t.progress||J;return Object(V.a)({},e,{progress:n,level:Object(V.a)({},B(6,6,n))});case"UPDATE_TILE_DESCRIPTION":console.log(t);var r=Object(V.a)({},e.progress,{tileTypes:Object(U.a)(e.progress.tileTypes)});return r.tileTypes[t.id]=Object(V.a)({},r.tileTypes[t.id],{description:t.description}),Y(r),Object(V.a)({},e,{progress:r});case"SHOW_LEVEL_SELECT":return Object(V.a)({},e,{levelSelectShown:!0});case"HIDE_LEVEL_SELECT":return Object(V.a)({},e,{levelSelectShown:!1});case"SHOW_RULES":return Object(V.a)({},e,{rulesShown:!0});case"HIDE_RULES":return Object(V.a)({},e,{rulesShown:!1});case"SET_CURRENT_DIFFICULTY":if(t.val===e.progress.currentDifficulty)return Object(V.a)({},e,{levelSelectShown:!1});var i=Object(V.a)({},e.progress,{currentDifficulty:t.val});return Object(V.a)({},e,{progress:i,level:Object(V.a)({},e.level,B(6,6,i)),levelSelectShown:!1});case"NEW_GAME":return Object(V.a)({},e,{level:Object(V.a)({},e.level,B(6,6,e.progress))});case"RESET_LEVEL":return Object(V.a)({},e,{level:Object(V.a)({},e.level,{edgeState:e.level.edges.map(function(e){return{visited:!1}}),vertexState:e.level.vertices.map(function(t,n){return{visited:n===e.level.entries[0]}}),tileState:e.level.tiles.map(function(e){return{valid:!0}}),regions:[e.level.tiles.map(function(e,t){return t})],path:[e.level.entries[0]],completed:!1,won:!1})});case"VISIT_VERTEX":console.log(t.type),console.log(t.id);var l=t.id,o=Object(U.a)(e.level.vertexState);o[l]=Object(V.a)({},o[l]);var a=e.level.vertices[l],s=Object(U.a)(e.level.path),c=!1,u=!1;if(!a)return e;if(e.level.completed)return e;var v=s[s.length-1],f=s[s.length-2],d=e.level.edges.findIndex(function(e){return e.vertices.indexOf(l)>=0&&e.vertices.indexOf(v)>=0&&!e.broken}),p=e.level.edges[d];if(console.log("Found edge "+d),console.log(p),0===s.length&&"entry"!==a.vertexType)return e;if(1===s.length&&"entry"===a.vertexType)s=[l],(o=e.level.vertices.map(function(e){return{visited:!1}}))[l].visited=!0;else if("entry"!==a.vertexType||p)if(l===f)o[s.pop()]={visited:!1};else{if(o[l].visited)return e;if(s.length>0&&!p)return e;o[l].visited=!0,s.push(l),"exit"===a.vertexType&&(c=!0)}else s=[l],(o=e.level.vertices.map(function(e){return{visited:!1}}))[l].visited=!0;var h=H(s,e.level.edges),g=e.level.edgeState.map(function(e,t){return h.indexOf(t)>=0?{visited:!0}:{visited:!1}}),m=A(e.level.tiles,e.level.edges,h);u=!0;for(var b=e.level.tiles.map(function(t,n){return Object(V.a)({},e.level.tileState[n],{valid:!0})}),y=0;y<m.length;y++){var O=!0,S=!1,E=void 0;try{for(var j,M=m[y][Symbol.iterator]();!(O=(j=M.next()).done);O=!0){var x=j.value;b[x].region=y;var T=G[e.level.tiles[x].tileType].validate(x,m[y],e.level.tiles,b);T||(u=!1),b[x].valid=T}}catch(L){S=!0,E=L}finally{try{O||null==M.return||M.return()}finally{if(S)throw E}}}var w=Object(V.a)({},e,{level:Object(V.a)({},e.level,{vertexState:o,edgeState:g,tileState:b,path:s,completed:c,won:u,regions:m})});if(u&&c&&e.level.difficulty===e.progress.maxDifficulty){var k=w.progress=Object(V.a)({},e.progress);k.winsToNextUnlock--,k.winsToNextUnlock<=0&&k.tileTypes.length<W.length-1&&(k.winsToNextUnlock=10,k.maxDifficulty++,k.currentDifficulty++,k.tileTypes=Object(U.a)(k.tileTypes).concat([function(e){var t=e.tileTypes.map(function(e){return e.symbol}),n=W.filter(function(e){return t.indexOf(e)<0}),r=n[Math.floor(Math.random()*n.length)],i=Object.keys(G).filter(function(e){return!!G[e].generateSubtype});return G[i[Math.floor(Math.random()*i.length)]].generateSubtype(r)}(k)]),Y(k))}return w;default:return e}},Object(_.a)(q.a));o.a.render(i.a.createElement(f.a,{store:$},i.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.97fa79c5.chunk.js.map